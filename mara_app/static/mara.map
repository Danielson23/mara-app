{"version":3,"sources":["../components/table/index.js","../components/alert/index.js","../js/content-loader.js","mara.js","../components/card/index.js","../js/window.js","../components/navigation/index.js","../components/filters/index.js","../components/header/index.js","../components/layout/index.js","../components/main/index.js"],"names":["Table","$","floatThead","top","position","window","floatMaraTableHeaders","reflowMaraTableHeaders","Alert","message","category","$alerts","document","getElementById","$alert","createElement","classList","add","innerHTML","appendChild","setTimeout","remove","ContentLoader","containerId","url","divHeightKey","$container","fetch","then","response","text","content","catch","error","showAlert","loadContentAsynchronously","loadAndReplace","Window","delay","dispatchEvent","Event","currentNavigationEntry","Navigation","css","show","$body","addClass","scrollIntoView","matchMedia","matches","Filters","collapseFilters","querySelector","triggerResize","removeClass","event","hasClass","collapseNavigation","expandNavigation","uri","location","pathname","search","hash","matchingUris","map","_","el","attr","filter","href","startsWith","sort","a","b","length","longestUri","parent","siblings","parentsUntil","children","$a","slideUp","queue","find","each","slideDown","ajax","success","updateContent","textStatus","errorThrown","empty","append","fadeIn","tooltip","boundary","highlightNavigationEntry","onhashchange","localStorage","setItem","ready","loadContent","toggleNavigationEntry","toggleNavigation","expandFilters","toggleFilters"],"mappings":"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","file":"mara.map","sourceRoot":"../frontend/entries","sourcesContent":["import './index.scss';\n\nexport default class Table {\n    // floats all mara table headers\n    static floatMaraTableHeaders() {\n        $('.mara-table-float-header').floatThead({\n            top: 60,\n            position: 'absolute'\n        });\n    }\n\n    // when the page layout drastically changes,\n    // then the floating headers need to be re-positioned\n    static reflowMaraTableHeaders() {\n        $('.mara-table-float-header').floatThead('reflow');\n    }\n}\n\nwindow.floatMaraTableHeaders = Table.floatMaraTableHeaders;\nwindow.reflowMaraTableHeaders = Table.reflowMaraTableHeaders;\n","import './index.scss';\n\nexport default class Alert {\n    // adds an alert to the bottom of the page\n    static showAlert(message, category) {\n        const $alerts = document.getElementById('alerts');\n\n        const $alert = document.createElement('div');\n        $alert.classList.add(\n            'alert',\n            'alert--hidden',\n            `alert-${category}`,\n            `alert-dismissible`\n        );\n        $alert.innerHTML = `\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n            ${message}\n        `;\n\n        $alerts.appendChild($alert);\n\n        setTimeout(() => {\n            $alert.classList.remove('alert--hidden');\n        }, 1000);\n    }\n}\n","import Table from '../components/table';\nimport Alert from '../components/alert';\n\nexport default class ContentLoader {\n    static loadAndReplace(containerId, url, divHeightKey) {\n        const $container = document.getElementById(containerId);\n\n        fetch(url)\n            .then(response => response.text())\n            .then(content => {\n                $container.innerHTML = content;\n\n                Table.reflowMaraTableHeaders();\n            })\n            .catch(error => {\n                Alert.showAlert(\n                    `\"${error}\" while fetching \"<a href=\"${url}\">${url}</a>\"`,\n                    'danger'\n                );\n\n                $container.innerHTML = '<span class=\"fa fa-bug\"></span>';\n            });\n    }\n}\n\nwindow.loadContentAsynchronously = ContentLoader.loadAndReplace;\n","import '../js/content-loader';\n\nimport '../scss/base.scss';\n\nimport '../components/**/index.js';\n","import './index.scss';\n","export default class Window {\n    static triggerResize({ delay = 300 } = {}) {\n        setTimeout(() => {\n            window.dispatchEvent(new Event('resize'));\n        }, delay);\n    }\n}\n","import './index.scss';\n\nimport Window from '../../js/window';\nimport Filters from '../filters';\nimport Alert from '../alert';\n\n// the nav entry that matches the current page uri best\nvar currentNavigationEntry;\n\nexport default class Navigation {\n    // expands the navigation sidebar\n    static expandNavigation() {\n        $('#mara-navigation .mara-nav-entry.visible:not(.level-1)')\n            .css('height', '') // reset height if it was left over from a previous slide action\n            .show(0);\n\n        const $body = $('body');\n        $body.addClass('show-navigation');\n\n        if (currentNavigationEntry) {\n            currentNavigationEntry[0].scrollIntoView(false);\n        }\n\n        if (window.matchMedia('(max-width: 1280px)').matches) {\n            Filters.collapseFilters();\n        }\n\n        document\n            .querySelector('.js-page-header__menu')\n            .classList.add('page-header__menu--open');\n\n        Window.triggerResize();\n    }\n\n    // collapses the navigation side bar\n    static collapseNavigation() {\n        const $body = $('body');\n        $body.removeClass('show-navigation');\n\n        document\n            .querySelector('.js-page-header__menu')\n            .classList.remove('page-header__menu--open');\n\n        Window.triggerResize();\n    }\n\n    // expands or collapses the navigation side bar\n    static toggleNavigation(event) {\n        const $body = $('body');\n\n        if ($body.hasClass('show-navigation')) {\n            Navigation.collapseNavigation();\n        } else {\n            Navigation.expandNavigation();\n        }\n    }\n\n    // expands and highlights the navigation entry that matches an uri best\n    static highlightNavigationEntry() {\n        const uri =\n            window.location.pathname +\n            window.location.search +\n            window.location.hash;\n\n        // find all navigation entries that match the request uri, take the longest (most specific) match\n        var matchingUris = $('#mara-navigation .mara-nav-entry > a')\n            .map((_, el) => $(el).attr('href'))\n            .filter((_, href) => uri.startsWith(href))\n            .sort((a, b) => b.length - a.length);\n\n        if (matchingUris.length) {\n            const longestUri = matchingUris[0];\n\n            currentNavigationEntry = $(\n                `#mara-navigation a[href=\"${longestUri}\"]`\n            ).parent();\n\n            currentNavigationEntry.siblings().removeClass('highlighted');\n\n            currentNavigationEntry\n                .addClass('highlighted')\n                .addClass('visible')\n                .addClass('expanded');\n\n            currentNavigationEntry\n                .parentsUntil('#mara-navigation')\n                .addClass('expanded')\n                .addClass('highlighted')\n                .addClass('visible')\n                .children('div')\n                .addClass('visible');\n        }\n    }\n\n    // expands or collapses a navigation entry\n    static toggleNavigationEntry(a) {\n        const $a = $(a);\n\n        if ($a.parent().hasClass('expanded')) {\n            $a.parent().removeClass('expanded');\n\n            $a.siblings()\n                .removeClass('visible')\n                // .css('height', '') // reset height if it was left over from a previous slide action\n                .slideUp({ queue: true });\n        } else {\n            // expand entry\n            $a.parent()\n                .siblings()\n                .parent()\n                .find('.expanded > a')\n                .each(function() {\n                    $(this)\n                        .parent()\n                        .removeClass('expanded');\n                    $(this)\n                        .siblings()\n                        .removeClass('visible')\n                        // .css('height', '') // reset height if it was left over from a previous slide action\n                        .slideUp({ queue: true });\n                });\n\n            $a.parent().addClass('expanded');\n\n            $a.siblings()\n                .addClass('visible')\n                // .css('height', '') // reset height if it was left over from a previous slide action\n                .slideDown({ queue: true });\n        }\n    }\n\n    static loadContent() {\n        const url = '/mara-app/navigation-bar';\n\n        $.ajax({\n            url,\n            success: Navigation.updateContent,\n            error(_, textStatus, errorThrown) {\n                const message = `<span class=\"fa fa-bug\"></span>\n            ${textStatus} while fetching <a href=\"${url}\">${url}</a>: ${errorThrown}`;\n\n                Alert.showAlert(message, 'danger');\n\n                $('#mara-navigation')\n                    .empty()\n                    .append('<div class=\"fa fa-bug\"> </div>');\n            }\n        });\n    }\n\n    static updateContent(content) {\n        $('#mara-navigation')\n            .empty()\n            .append(content)\n            .fadeIn(500);\n\n        // enable tooltips\n        $('[data-toggle=\"tooltip\"]').tooltip({ boundary: 'window' });\n\n        // highlight navigation entry for current uri\n        Navigation.highlightNavigationEntry();\n\n        // on navigation entries navigate within a page, also update the navigation\n        window.onhashchange = () => {\n            Navigation.highlightNavigationEntry();\n            Navigation.collapseNavigation();\n        };\n\n        // store navigation in localstorage\n        localStorage.setItem('navigation-bar', content);\n    }\n}\n\n$(document).ready(() => {\n    Navigation.loadContent();\n});\n\nwindow.toggleNavigationEntry = Navigation.toggleNavigationEntry;\nwindow.toggleNavigation = Navigation.toggleNavigation;\n","import './index.scss';\n\nimport Navigation from '../navigation';\nimport Window from '../../js/window';\n\nexport default class Filters {\n    static toggleFilters() {\n        if ($('body').hasClass('show-filters')) {\n            Filters.collapseFilters();\n        } else {\n            Filters.expandFilters();\n        }\n    }\n\n    static collapseFilters() {\n        $('body').removeClass('show-filters');\n\n        Window.triggerResize();\n    }\n\n    static expandFilters() {\n        $('body').addClass('show-filters');\n\n        if (window.matchMedia('(max-width: 1280px)').matches) {\n            Navigation.collapseNavigation();\n        }\n\n        Window.triggerResize();\n    }\n}\n\nwindow.toggleFilters = Filters.toggleFilters;\n","import './index.scss';\n","import './index.scss';\n","import './index.scss';\n"]}